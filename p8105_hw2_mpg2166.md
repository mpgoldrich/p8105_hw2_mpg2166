P8105 Homework 2
================
Madison Goldrich - mpg2166

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

## Problem 1

First, clean the data in pols-month.csv

``` r
pols_month_df =
  read_csv("data/fivethirtyeight_datasets/pols-month.csv") |> 
  separate(
    mon,
    sep = "-",
    into = c("year", "month", "day")
  ) |> 
  mutate(
    month = case_match(
      month,
      "01" ~ "Jan",
      "02" ~ "Feb",
      "03" ~ "Mar",
      "04" ~ "Apr",
      "05" ~ "May",
      "06" ~ "Jun",
      "07" ~ "Jul",
      "08" ~ "Aug",
      "09" ~ "Sep",
      "10" ~ "Oct",
      "11" ~ "Nov",
      "12" ~ "Dec"
    )
  ) |> 
  mutate(
    president = case_match(
      prez_gop,
      0 ~ "dem",
      1 ~ "gop"
     )
    ) |> 
  select(-day, -prez_gop, -prez_dem)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Second, clean the data in snp.csv

``` r
snp_df =
  read_csv("data/fivethirtyeight_datasets/snp.csv") |> 
    separate(
    date,
    sep = "/",
    into = c("month", "day", "year")
  ) |> 
  mutate(
    year = as.numeric(year),
    month = as.numeric(month)
  ) |> 
  mutate(
    year = case_when(
      year <=15 ~ year + 2000,
      year > 15 ~ year + 1900
    )
  ) |> 
  select(year, month, close) |> 
  arrange(year, month) |> 
  mutate(
    month = case_match(
      month,
      1  ~ "Jan",
      2  ~ "Feb",
      3  ~ "Mar",
      4  ~ "Apr",
      5  ~ "May",
      6  ~ "Jun",
      7  ~ "Jul",
      8  ~ "Aug",
      9  ~ "Sep",
      10 ~ "Oct",
      11 ~ "Nov",
      12 ~ "Dec"
    )
  ) |> 
  mutate(
    year = as.character(year)
  )
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Third, tidy the unemployment data so that it can be merged with the
previous datasets.

``` r
unemployment_df =
  read.csv("data/fivethirtyeight_datasets/unemployment.csv") |> 
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemployment"
  ) |> 
  janitor::clean_names() |> 
  mutate(
    year = as.character(year)
  )
```

Join the datasets

``` r
pols_snp_df =
  left_join(pols_month_df, snp_df)
```

    ## Joining with `by = join_by(year, month)`

``` r
five_thirty_eight_df =
  left_join(pols_snp_df, unemployment_df)
```

    ## Joining with `by = join_by(year, month)`

The pols-month dataset initially contained 9 variables related to the
number of national politicians (i.e., president, senators,
representatives, etc.) who were democratic or republican at any given
time. The snp dataset contained the closing values of the S&P stock
index (`close`) on the associated date. Unemployment dataset contained
the percentage of unemployment (`unemployment`) in the associated
month/year. The resulting merged dataset is 822 rows by 11 columns.
Years in which data was collected range from 1947 to 2015.
